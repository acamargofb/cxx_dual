<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Overriding the default algorithm</title>
<link rel="stylesheet" href="../../../../../../doc/src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.78.1">
<link rel="home" href="../../index.html" title="Chapter&#160;1.&#160;The Cxx Dual Library">
<link rel="up" href="../choosing_the_dual_library.html" title="Choosing the dual library">
<link rel="prev" href="../choosing_the_dual_library.html" title="Choosing the dual library">
<link rel="next" href="header_file_inclusion.html" title="Header file inclusion">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../../boost.png"></td>
<td align="center"><a href="../../../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../choosing_the_dual_library.html"><img src="../../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../choosing_the_dual_library.html"><img src="../../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="header_file_inclusion.html"><img src="../../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="cxxd.choosing_the_dual_library.overriding_the_default_algorithm"></a><a class="link" href="overriding_the_default_algorithm.html" title="Overriding the default algorithm">Overriding
      the default algorithm</a>
</h3></div></div></div>
<p>
        Although CXXD chooses automatically whether the Boost library or the C++
        standard library is to be used for any given CXXD-mod the programmer may
        decide to override this choice. The method of overriding the choice is to
        define a particular macro before including a particular CXXD header.
      </p>
<p>
        The programmer may override the automatic choice of CXXD by specifying that
        the Boost library be used or by specifying that the C++ standard library
        be used. If the programmer specifies that the C++ standard library be used
        and that library is not available for use, a preprocessor error will normally
        be generated.
      </p>
<h5>
<a name="cxxd.choosing_the_dual_library.overriding_the_default_algorithm.h0"></a>
        <span class="phrase"><a name="cxxd.choosing_the_dual_library.overriding_the_default_algorithm.specific_overriding"></a></span><a class="link" href="overriding_the_default_algorithm.html#cxxd.choosing_the_dual_library.overriding_the_default_algorithm.specific_overriding">Specific
        overriding</a>
      </h5>
<p>
        For any given CXXD-mod 'xxx' defining a macro called 'CXXD_XXX_USE_BOOST',
        where XXX is the uppercase name of the CXXD-mod, specifies that the Boost
        library will be used for 'xxx'. If used CXXD_XXX_USE_BOOST must always be
        defined to nothing, as in:
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_</span><span class="char">'XXX'</span><span class="identifier">_USE_BOOST</span>
</pre>
<p>
        where XXX is the uppercase name of the module.
      </p>
<p>
        For any given CXXD-mod 'xxx' defining a macro called 'CXXD_XXX_USE_STD',
        where XXX is the uppercase name of the CXXD-mod, specifies that the C++ standard
        library will be used for 'xxx'. If used CXXD_XXX_USE_STD must always be defined
        to nothing, as in:
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_</span><span class="char">'XXX'</span><span class="identifier">_USE_STD</span>
</pre>
<p>
        where XXX is the uppercase name of the module.
      </p>
<p>
        The specific override macros for each CXXD-mod are:
      </p>
<div class="table">
<a name="cxxd.choosing_the_dual_library.overriding_the_default_algorithm.spovmac"></a><p class="title"><b>Table&#160;1.3.&#160;Specific override macros</b></p>
<div class="table-contents"><table class="table" summary="Specific override macros">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                <p>
                  CXXD-mod
                </p>
              </th>
<th>
                <p>
                  Boost override macro
                </p>
              </th>
<th>
                <p>
                  C++ standard override macro
                </p>
              </th>
</tr></thead>
<tbody>
<tr>
<td>
                <p>
                  array
                </p>
              </td>
<td>
                <p>
                  CXXD_ARRAY_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_ARRAY_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  atomic
                </p>
              </td>
<td>
                <p>
                  CXXD_ATOMIC_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_ATOMIC_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  bind
                </p>
              </td>
<td>
                <p>
                  CXXD_BIND_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_BIND_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  chrono
                </p>
              </td>
<td>
                <p>
                  CXXD_CHRONO_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_CHRONO_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  condition_variable
                </p>
              </td>
<td>
                <p>
                  CXXD_CONDITION_VARIABLE_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_CONDITION_VARIABLE_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  enable_shared_from_this
                </p>
              </td>
<td>
                <p>
                  CXXD_ENABLE_SHARED_FROM_THIS_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_ENABLE_SHARED_FROM_THIS_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  function
                </p>
              </td>
<td>
                <p>
                  CXXD_FUNCTION_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_FUNCTION_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  hash
                </p>
              </td>
<td>
                <p>
                  CXXD_HASH_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_HASH_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  make_shared
                </p>
              </td>
<td>
                <p>
                  CXXD_MAKE_SHARED_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_MAKE_SHARED_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  mem_fn
                </p>
              </td>
<td>
                <p>
                  CXXD_MEM_FN_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_MEM_FN_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  move
                </p>
              </td>
<td>
                <p>
                  CXXD_MOVE_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_MOVE_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  mutex
                </p>
              </td>
<td>
                <p>
                  CXXD_MUTEX_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_MUTEX_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  random
                </p>
              </td>
<td>
                <p>
                  CXXD_RANDOM_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_RANDOM_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  ratio
                </p>
              </td>
<td>
                <p>
                  CXXD_RATIO_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_RATIO_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  ref
                </p>
              </td>
<td>
                <p>
                  CXXD_REF_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_REF_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  regex
                </p>
              </td>
<td>
                <p>
                  CXXD_REGEX_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_REGEX_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  shared_mutex
                </p>
              </td>
<td>
                <p>
                  CXXD_SHARED_MUTEX_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_SHARED_MUTEX_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  shared_ptr
                </p>
              </td>
<td>
                <p>
                  CXXD_SHARED_PTR_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_SHARED_PTR_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  system_error
                </p>
              </td>
<td>
                <p>
                  CXXD_SYSTEM_ERROR_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_SYSTEM_ERROR_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  thread
                </p>
              </td>
<td>
                <p>
                  CXXD_THREAD_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_THREAD_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  tuple
                </p>
              </td>
<td>
                <p>
                  CXXD_TUPLE_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_TUPLE_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  type_index
                </p>
              </td>
<td>
                <p>
                  CXXD_TYPE_INDEX_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_TYPE_INDEX_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  type_traits
                </p>
              </td>
<td>
                <p>
                  CXXD_TYPE_TRAITS_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_TYPE_TRAITS_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  unordered_map
                </p>
              </td>
<td>
                <p>
                  CXXD_UNORDERED_MAP_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_UNORDERED_MAP_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  unordered_multimap
                </p>
              </td>
<td>
                <p>
                  CXXD_UNORDERED_MULTIMAP_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_UNORDERED_MULTIMAP_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  unordered_multiset
                </p>
              </td>
<td>
                <p>
                  CXXD_UNORDERED_MULTISET_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_UNORDERED_MULTISET_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  unordered_set
                </p>
              </td>
<td>
                <p>
                  CXXD_UNORDERED_SET_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_UNORDERED_SET_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  weak_ptr
                </p>
              </td>
<td>
                <p>
                  CXXD_WEAK_PTR_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_WEAK_PTR_USE_STD
                </p>
              </td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><p>
        If for any given CXXD-mod 'xxx' both CXXD_XXX_USE_BOOST and CXXD_XXX_USE_STD
        is defined a preprocessing error will occur when the CXXD header for 'xxx'
        is included.
      </p>
<p>
        As examples, using the regex CXXD-mod:
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_REGEX_USE_BOOST</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">cxx_dual</span><span class="special">/</span><span class="identifier">regex</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="special">...</span> <span class="identifier">code</span>
</pre>
<p>
        CXXD_HAS_STD_REGEX is defined as '0', CXXD_REGEX_NS is defined as 'boost',
        and CXXD_REGEX_HEADER is defined as '&lt;boost/regex.hpp&gt;'.
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_REGEX_USE_STD</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">cxx_dual</span><span class="special">/</span><span class="identifier">regex</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="special">...</span> <span class="identifier">code</span>
</pre>
<p>
        CXXD_HAS_STD_REGEX is defined as '1', CXXD_REGEX_NS is defined as 'std',
        and CXXD_REGEX_HEADER is defined as '&lt;regex&gt;' as long as the C++ standard
        regex library is available for use, else a preprocessing error is generated.
      </p>
<h5>
<a name="cxxd.choosing_the_dual_library.overriding_the_default_algorithm.h1"></a>
        <span class="phrase"><a name="cxxd.choosing_the_dual_library.overriding_the_default_algorithm.general_overriding"></a></span><a class="link" href="overriding_the_default_algorithm.html#cxxd.choosing_the_dual_library.overriding_the_default_algorithm.general_overriding">General
        overriding</a>
      </h5>
<p>
        Along with the specific macros of the form CXXD_XXX_USE_BOOST and CXXD_XXX_USE_STD
        which override default processing for the specific 'xxx' CXXD-mod the programmer
        can specify either of two generalized macros which overrides default processing
        for any CXXD-mod.
      </p>
<p>
        Defining a macro called CXXD_USE_BOOST specifies that the Boost library will
        be used for any CXXD-mod. If used CXXD_USE_BOOST must always be defined to
        nothing, as in:
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_USE_BOOST</span>
</pre>
<p>
        Defining a macro called CXXD_USE_STD specifies that the C++ standard library
        will be used for any CXXD-mod. If used CXXD_USE_STD must always be defined
        to nothing, as in:
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_USE_STD</span>
</pre>
<p>
        If both CXXD_USE_BOOST and CXXD_USE_STD is defined a preprocessing error
        will occur when any CXXD-mod header is included.
      </p>
<p>
        If for any given CXXD-mod 'xxx' both CXXD_'XXX'_USE_BOOST and CXXD_USE_STD
        is defined a preprocessing error will occur when the CXXD-mod header file
        for 'xxx' is included.
      </p>
<p>
        If for any given CXXD-mod 'xxx' both CXXD_'XXX'_USE_STD and CXXD_USE_BOOST
        is defined a preprocessing error will occur when the CXXD-mod header file
        for 'xxx' is included.
      </p>
<p>
        As examples, using the regex CXXD-mod:
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_USE_BOOST</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">cxx_dual</span><span class="special">/</span><span class="identifier">regex</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="special">...</span> <span class="identifier">code</span>
</pre>
<p>
        CXXD_HAS_STD_REGEX is defined as '0', CXXD_REGEX_NS is defined as 'boost',
        and CXXD_REGEX_HEADER is defined as '&lt;boost/regex.hpp&gt;'.
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_USE_STD</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">cxx_dual</span><span class="special">/</span><span class="identifier">regex</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="special">...</span> <span class="identifier">code</span>
</pre>
<p>
        CXXD_HAS_STD_REGEX is defined as '1', CXXD_REGEX_NS is defined as 'std',
        and CXXD_REGEX_HEADER is defined as '&lt;regex&gt;' as long as the C++ standard
        regex library is available for use, else a preprocessing error is generated.
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_REGEX_USE_BOOST</span>
<span class="preprocessor">#define</span> <span class="identifier">CXXD_USE_STD</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">cxx_dual</span><span class="special">/</span><span class="identifier">regex</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="special">...</span> <span class="identifier">code</span>
</pre>
<p>
        A preprocessing error is generated.
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_REGEX_USE_STD</span>
<span class="preprocessor">#define</span> <span class="identifier">CXXD_USE_BOOST</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">cxx_dual</span><span class="special">/</span><span class="identifier">regex</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="special">...</span> <span class="identifier">code</span>
</pre>
<p>
        A preprocessing error is generated.
      </p>
<p>
        Using any CXXD header:
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_USE_BOOST</span>
<span class="preprocessor">#define</span> <span class="identifier">CXXD_USE_STD</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">cxx_dual</span><span class="special">/</span><span class="char">'any_cxxd_header'</span>
<span class="special">...</span> <span class="identifier">code</span>
</pre>
<p>
        A preprocessing error is generated.
      </p>
<h5>
<a name="cxxd.choosing_the_dual_library.overriding_the_default_algorithm.h2"></a>
        <span class="phrase"><a name="cxxd.choosing_the_dual_library.overriding_the_default_algorithm.purpose_of_overriding"></a></span><a class="link" href="overriding_the_default_algorithm.html#cxxd.choosing_the_dual_library.overriding_the_default_algorithm.purpose_of_overriding">Purpose
        of overriding</a>
      </h5>
<p>
        The purpose of using overriding macros, for any CXXD-mod with the specific
        overriding macros or for CXXD as a whole with the general overriding macros,
        is to override the default algorithm which CXXD uses to choose a dual library.
        However using overriding macros for one's own direct use(s) of CXXD is generally
        foolish. This is because the easiest implementation, rather than using an
        overriding macro, is to just drop CXXD in favor of using either the Boost
        library or C++ standard library directly.
      </p>
<p>
        In other words, instead of:
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_USE_BOOST</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">cxx_dual</span><span class="special">/</span><span class="identifier">regex</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="identifier">CXXD_REGEX_HDR</span>
<span class="identifier">CXXD_REGEX_NS</span><span class="special">::</span><span class="identifier">regex</span> <span class="identifier">my_regex</span><span class="special">;</span> <span class="comment">// etc.</span>
<span class="special">...</span> <span class="identifier">code</span>
</pre>
<p>
        you can simply code:
      </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">regex</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">regex</span> <span class="identifier">my_regex</span><span class="special">;</span> <span class="comment">// etc.</span>
<span class="special">...</span> <span class="identifier">code</span>
</pre>
<p>
        and instead of:
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_USE_STD</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">cxx_dual</span><span class="special">/</span><span class="identifier">regex</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="identifier">CXXD_REGEX_HDR</span>
<span class="identifier">CXXD_REGEX_NS</span><span class="special">::</span><span class="identifier">regex</span> <span class="identifier">my_regex</span><span class="special">;</span> <span class="comment">// etc.</span>
<span class="special">...</span> <span class="identifier">code</span>
</pre>
<p>
        you can simply code:
      </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">regex</span><span class="special">&gt;</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">regex</span> <span class="identifier">my_regex</span><span class="special">;</span> <span class="comment">// etc.</span>
<span class="special">...</span> <span class="identifier">code</span>
</pre>
<p>
        In this sense the examples given above of using specific or general overriding
        macros are purely artificial in order to merely show what the meaning of
        these overriding macros entail. In actual code directly overriding a particular
        CXXD-mod should almost never be done in favor of directly using either the
        Boost or C++ standard implementations of a dual library.
      </p>
<p>
        So what is the actual purpose of the overriding macros ? The purpose is to
        override the use of CXXD by another implementation whose source files should
        not be modified. A third-party library may choose to use CXXD to provide
        a dual library for a particular CXXD-mod. Your own code, which uses the third-party
        library but otherwise uses either the Boost version of the dual library or
        the C++ standard version of the dual library in all other situations, may
        enforce its own usage on the dual library interface of the third-party library
        by using an overriding macro. As an example a third-party library might have
        as a public interface:
      </p>
<pre class="programlisting"><span class="comment">// Header file ThirdPartyHeader.hpp</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">cxx_dual</span><span class="special">/</span><span class="identifier">regex</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="identifier">CXXD_REGEX_HEADER</span>
<span class="keyword">class</span> <span class="identifier">ThirdPartyClass</span>
    <span class="special">{</span>
    <span class="keyword">public</span><span class="special">:</span>
    <span class="keyword">void</span> <span class="identifier">SomeFunction</span><span class="special">(</span><span class="identifier">CXXD_REGEX_NS</span><span class="special">::</span><span class="identifier">regex</span> <span class="special">&amp;);</span>
    <span class="special">...</span> <span class="comment">// other functionality</span>
    <span class="special">};</span>
</pre>
<p>
        We will assume this is a header-only library for the time being ( a discussion
        of using CXXD with a non-header-only library will follow later in the documentation
        ). In one's own code you may desire to use the ThirdPartyClass::SomeFunction
        interface with specifically the Boost regex library only. Your own code might
        then look like:
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_REGEX_USE_BOOST</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">ThirdPartyHeader</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">regex</span> <span class="identifier">my_regex</span><span class="special">(</span><span class="string">"SomeRegularExpression etc."</span><span class="special">);</span>
<span class="identifier">ThirdPartyClass</span> <span class="identifier">tpclass</span><span class="special">;</span>
<span class="identifier">tpclass</span><span class="special">.</span><span class="identifier">SomeFunction</span><span class="special">(</span><span class="identifier">my_regex</span><span class="special">);</span>
</pre>
<p>
        Conversely you may decide that your use of the ThirdPartyClass::SomeFunction
        interface should be with the C++ standard regex library only, so your code
        might then look like:
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_REGEX_USE_STD</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">ThirdPartyHeader</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">regex</span> <span class="identifier">my_regex</span><span class="special">(</span><span class="string">"SomeRegularExpression etc."</span><span class="special">);</span>
<span class="identifier">ThirdPartyClass</span> <span class="identifier">tpclass</span><span class="special">;</span>
<span class="identifier">tpclass</span><span class="special">.</span><span class="identifier">SomeFunction</span><span class="special">(</span><span class="identifier">my_regex</span><span class="special">);</span>
</pre>
<p>
        Instead if you did accept the dual nature of the ThirdPartyHeader.hpp header,
        your code might then like:
      </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">ThirdPartyHeader</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="identifier">CXXD_REGEX_NS</span><span class="special">::</span><span class="identifier">regex</span> <span class="identifier">my_regex</span><span class="special">(</span><span class="string">"SomeRegularExpression etc."</span><span class="special">);</span>
<span class="identifier">ThirdPartyClass</span> <span class="identifier">tpclass</span><span class="special">;</span>
<span class="identifier">tpclass</span><span class="special">.</span><span class="identifier">SomeFunction</span><span class="special">(</span><span class="identifier">my_regex</span><span class="special">);</span>
</pre>
<p>
        In other words using the overriding macros of CXXD serves the purpose of
        using some already established interface involving CXXD without changing
        that interface's own code, at the same time forcing the choice of a particular
        dual library to be used.
      </p>
<h5>
<a name="cxxd.choosing_the_dual_library.overriding_the_default_algorithm.h3"></a>
        <span class="phrase"><a name="cxxd.choosing_the_dual_library.overriding_the_default_algorithm.overriding_one_s_own_interface"></a></span><a class="link" href="overriding_the_default_algorithm.html#cxxd.choosing_the_dual_library.overriding_the_default_algorithm.overriding_one_s_own_interface">Overriding
        one's own interface</a>
      </h5>
<p>
        There is a situation where the programmer may choose to override his own
        use of a particular CXXD-mod. This is when he programs his own interface
        using a particular CXXD-mod but decides for a particular combination of compiler
        and/or OS that he wants to override that choice. In other words the programmer
        wishes to use a dual library for the benefits that CXXD has to offer but
        knows that for some combination of compiler and/or operating system that
        the particular dual library choice must be overridden to prevent a faulty
        implementation from being used.
      </p>
<p>
        Let's imagine that for a particular compiler version 'CCC' version 'NNN'
        on a particular OS 'OOO' we know that the standard library version of CXXD-mod
        'XXX' is buggy. Also let's imagine that we can test for the buggy combination
        through using the preprocessor defines, as we can do in Boost through either
        Boost.Config or even more easily through Boost.Predef. Our pseudocode for
        overriding our own use of the dual library in a header file might look like:
      </p>
<pre class="programlisting"><span class="comment">// Header file OwnOverrideHeader.hpp</span>
<span class="preprocessor">#if</span> <span class="identifier">CCCNNN</span> <span class="special">&amp;&amp;</span> <span class="identifier">OOO</span>
<span class="preprocessor">#define</span> <span class="identifier">CXXD_XXX_USE_BOOST</span>
<span class="preprocessor">#endif</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">cxxd</span><span class="special">/</span><span class="identifier">XXX</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="preprocessor">#include</span> <span class="identifier">CXXD_XXX_HEADER</span>
<span class="keyword">class</span> <span class="identifier">OwnOverrideClass</span>
    <span class="special">{</span>
    <span class="keyword">public</span><span class="special">:</span>
    <span class="keyword">void</span> <span class="identifier">SomeOwnOverrideFunction</span><span class="special">(</span><span class="identifier">CXXD_XXX_NS</span><span class="special">::</span><span class="identifier">xxx_object</span> <span class="special">&amp;);</span>
    <span class="special">...</span> <span class="comment">// other functionality</span>
    <span class="special">};</span>
</pre>
<p>
        So essentially where the purpose of the override macros is to change another
        interface's dual library choice for a particular CXXD-mod to a single implementation,
        you can use the override macros with one's own interface in order to provide
        one-off situations where you want to specifically control the implementation
        for a particular compiling environment.
      </p>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2015, 2016 Tropic Software East Inc<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../choosing_the_dual_library.html"><img src="../../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../choosing_the_dual_library.html"><img src="../../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="header_file_inclusion.html"><img src="../../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
</body>
</html>
