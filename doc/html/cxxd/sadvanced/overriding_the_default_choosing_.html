<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>Overriding the default choosing algorithm</title>
<link rel="stylesheet" href="../../../../../../doc/src/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.78.1">
<link rel="home" href="../../index.html" title="Chapter&#160;1.&#160;The Cxx Dual Library">
<link rel="up" href="../sadvanced.html" title="Advanced Functionality">
<link rel="prev" href="../sadvanced.html" title="Advanced Functionality">
<link rel="next" href="consistency.html" title="Consistency">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../../../boost.png"></td>
<td align="center"><a href="../../../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../sadvanced.html"><img src="../../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../sadvanced.html"><img src="../../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="consistency.html"><img src="../../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="cxxd.sadvanced.overriding_the_default_choosing_"></a><a class="link" href="overriding_the_default_choosing_.html" title="Overriding the default choosing algorithm">Overriding
      the default choosing algorithm</a>
</h3></div></div></div>
<p>
        The default algorithm employed by CXXD to choose whether to use a Boost library
        or its C++ standard equivalent for any mod is very simple. If the C++ standard
        library is available during compilation it is chosen and if it is not available
        during compilation its equivalent Boost library is chosen.
      </p>
<p>
        The determination of availability for any given mod is done by examining
        Boost Config macros. Boost Config has quite a number of macros which will
        specify which C++ standard library is available during compilation. The logic
        of determining which library is available is determined within Boost Config,
        and CXXD just uses the results of that logic to configure the macros for
        a particular mod.
      </p>
<p>
        The logic of setting the macros for any particular mod occurs when the mod
        implementation header for that mod is included in the code. Each mod header
        automatically includes its corresponding mod implementation header, so the
        programmer need only include the mod header to cause the choice to be made.
        The logic is completely preprocessor macro based, and is specific to each
        mod implemenattion header, although the logic for each mod implementation
        header is generally the same.
      </p>
<p>
        As an example, using the regex mod:
      </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">cxx_dual</span><span class="special">/</span><span class="identifier">regex</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="special">...</span> <span class="identifier">code</span>
</pre>
<p>
        If Boost Config determines that the C++ standard regex library is available
        CXXD_HAS_STD_REGEX is defined as '1', CXXD_REGEX_NS is defined as 'std',
        and CXXD_REGEX_HEADER is defined as '&lt;regex&gt;'. If Boost Config determines
        that the C++ standard regex library is not available CXXD_HAS_STD_REGEX is
        defined as '0', CXXD_REGEX_NS is defined as 'boost', and CXXD_REGEX_HEADER
        is defined as '&lt;boost/regex.hpp&gt;'.
      </p>
<h5>
<a name="cxxd.sadvanced.overriding_the_default_choosing_.h0"></a>
        <span class="phrase"><a name="cxxd.sadvanced.overriding_the_default_choosing_.overriding_the_choice"></a></span><a class="link" href="overriding_the_default_choosing_.html#cxxd.sadvanced.overriding_the_default_choosing_.overriding_the_choice">Overriding
        the choice</a>
      </h5>
<p>
        Although CXXD chooses automatically whether the Boost library or the C++
        standard library is to be used for any given mod the programmer may decide
        to override this choice. The method of overriding the choice is to define
        a particular macro before including a particular mod header.
      </p>
<p>
        The programmer may override the automatic choice of CXXD by specifying that
        the Boost library be used or by specifying that the C++ standard library
        be used. If the programmer specifies that the C++ standard library be used
        and that library is not available for use, a preprocessor error will normally
        be generated.
      </p>
<p>
        While it may seem reasonable that the programmer can override the choice
        by specifying that the Boost library be chosen for a particular mod, it might
        seem odd that programmer should be able to override the choice by specifying
        that the C++ standard library be chosen for a particular mod, considering
        the fact that the default choosing algorithm will automatically choose the
        C++ standard library if it is available. Specific cases for allowing this
        will be discussed later in the documentation, but the general case is that
        it is possible that a programmer, when using a particular mod, wants to makes
        sure that the C++ standard library is available. else he wants to force a
        preprocessing error.
      </p>
<h5>
<a name="cxxd.sadvanced.overriding_the_default_choosing_.h1"></a>
        <span class="phrase"><a name="cxxd.sadvanced.overriding_the_default_choosing_.specific_overriding"></a></span><a class="link" href="overriding_the_default_choosing_.html#cxxd.sadvanced.overriding_the_default_choosing_.specific_overriding">Specific
        overriding</a>
      </h5>
<p>
        For any given mod 'XXX' defining a macro called CXXD_'XXX'_USE_BOOST specifies
        that the Boost library will be used. If used CXXD_'XXX'_USE_BOOST must always
        be defined to expand to nothing, as in:
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_</span><span class="char">'XXX'</span><span class="identifier">_USE_BOOST</span>
</pre>
<p>
        where XXX is the uppercase name of the mod.
      </p>
<p>
        For any given mod 'XXX' defining a macro called CXXD_'XXX'_USE_STD specifies
        that the C++ standard library will be used. If used CXXD_'XXX'_USE_STD must
        always be defined to nothing, as in:
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_</span><span class="char">'XXX'</span><span class="identifier">_USE_STD</span>
</pre>
<p>
        where XXX is the uppercase name of the mod.
      </p>
<p>
        The specific override macros for each mod are:
      </p>
<div class="table">
<a name="cxxd.sadvanced.overriding_the_default_choosing_.spovmac"></a><p class="title"><b>Table&#160;1.6.&#160;Specific override macros</b></p>
<div class="table-contents"><table class="table" summary="Specific override macros">
<colgroup>
<col>
<col>
<col>
</colgroup>
<thead><tr>
<th>
                <p>
                  Mod
                </p>
              </th>
<th>
                <p>
                  Boost override macro
                </p>
              </th>
<th>
                <p>
                  C++ standard override macro
                </p>
              </th>
</tr></thead>
<tbody>
<tr>
<td>
                <p>
                  array
                </p>
              </td>
<td>
                <p>
                  CXXD_ARRAY_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_ARRAY_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  atomic
                </p>
              </td>
<td>
                <p>
                  CXXD_ATOMIC_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_ATOMIC_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  bind
                </p>
              </td>
<td>
                <p>
                  CXXD_BIND_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_BIND_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  chrono
                </p>
              </td>
<td>
                <p>
                  CXXD_CHRONO_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_CHRONO_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  condition_variable
                </p>
              </td>
<td>
                <p>
                  CXXD_CONDITION_VARIABLE_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_CONDITION_VARIABLE_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  enable_shared_from_this
                </p>
              </td>
<td>
                <p>
                  CXXD_ENABLE_SHARED_FROM_THIS_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_ENABLE_SHARED_FROM_THIS_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  function
                </p>
              </td>
<td>
                <p>
                  CXXD_FUNCTION_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_FUNCTION_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  hash
                </p>
              </td>
<td>
                <p>
                  CXXD_HASH_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_HASH_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  make_shared
                </p>
              </td>
<td>
                <p>
                  CXXD_MAKE_SHARED_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_MAKE_SHARED_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  mem_fn
                </p>
              </td>
<td>
                <p>
                  CXXD_MEM_FN_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_MEM_FN_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  move
                </p>
              </td>
<td>
                <p>
                  CXXD_MOVE_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_MOVE_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  mutex
                </p>
              </td>
<td>
                <p>
                  CXXD_MUTEX_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_MUTEX_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  random
                </p>
              </td>
<td>
                <p>
                  CXXD_RANDOM_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_RANDOM_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  ratio
                </p>
              </td>
<td>
                <p>
                  CXXD_RATIO_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_RATIO_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  ref
                </p>
              </td>
<td>
                <p>
                  CXXD_REF_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_REF_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  regex
                </p>
              </td>
<td>
                <p>
                  CXXD_REGEX_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_REGEX_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  shared_mutex
                </p>
              </td>
<td>
                <p>
                  CXXD_SHARED_MUTEX_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_SHARED_MUTEX_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  shared_ptr
                </p>
              </td>
<td>
                <p>
                  CXXD_SHARED_PTR_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_SHARED_PTR_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  system_error
                </p>
              </td>
<td>
                <p>
                  CXXD_SYSTEM_ERROR_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_SYSTEM_ERROR_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  thread
                </p>
              </td>
<td>
                <p>
                  CXXD_THREAD_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_THREAD_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  tuple
                </p>
              </td>
<td>
                <p>
                  CXXD_TUPLE_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_TUPLE_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  type_index
                </p>
              </td>
<td>
                <p>
                  CXXD_TYPE_INDEX_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_TYPE_INDEX_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  type_traits
                </p>
              </td>
<td>
                <p>
                  CXXD_TYPE_TRAITS_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_TYPE_TRAITS_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  unordered_map
                </p>
              </td>
<td>
                <p>
                  CXXD_UNORDERED_MAP_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_UNORDERED_MAP_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  unordered_multimap
                </p>
              </td>
<td>
                <p>
                  CXXD_UNORDERED_MULTIMAP_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_UNORDERED_MULTIMAP_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  unordered_multiset
                </p>
              </td>
<td>
                <p>
                  CXXD_UNORDERED_MULTISET_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_UNORDERED_MULTISET_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  unordered_set
                </p>
              </td>
<td>
                <p>
                  CXXD_UNORDERED_SET_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_UNORDERED_SET_USE_STD
                </p>
              </td>
</tr>
<tr>
<td>
                <p>
                  weak_ptr
                </p>
              </td>
<td>
                <p>
                  CXXD_WEAK_PTR_USE_BOOST
                </p>
              </td>
<td>
                <p>
                  CXXD_WEAK_PTR_USE_STD
                </p>
              </td>
</tr>
</tbody>
</table></div>
</div>
<br class="table-break"><p>
        If for any given mod 'XXX' both CXXD_'XXX'_USE_BOOST and CXXD_'XXX'_USE_STD
        is defined a preprocessing error will occur when the mod header for 'XXX'
        is included.
      </p>
<p>
        As examples, using the regex mod:
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_REGEX_USE_BOOST</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">cxx_dual</span><span class="special">/</span><span class="identifier">regex</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="special">...</span> <span class="identifier">code</span>
</pre>
<p>
        CXXD_HAS_STD_REGEX is defined as '0', CXXD_REGEX_NS is defined as 'boost',
        and CXXD_REGEX_HEADER is defined as '&lt;boost/regex.hpp&gt;'.
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_REGEX_USE_STD</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">cxx_dual</span><span class="special">/</span><span class="identifier">regex</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="special">...</span> <span class="identifier">code</span>
</pre>
<p>
        CXXD_HAS_STD_REGEX is defined as '1', CXXD_REGEX_NS is defined as 'std',
        and CXXD_REGEX_HEADER is defined as '&lt;regex&gt;', as long as the C++ standard
        regex library is available for use, else a preprocessing error is generated.
      </p>
<h5>
<a name="cxxd.sadvanced.overriding_the_default_choosing_.h2"></a>
        <span class="phrase"><a name="cxxd.sadvanced.overriding_the_default_choosing_.general_overriding"></a></span><a class="link" href="overriding_the_default_choosing_.html#cxxd.sadvanced.overriding_the_default_choosing_.general_overriding">General
        overriding</a>
      </h5>
<p>
        Along with the specific macros of the form CXXD_'XXX'_USE_BOOST and CXXD_'XXX'_USE_STD
        which override default processing for the specific 'xxx' mod the programmer
        can specify either of two generalized macros which overrides default processing
        for any mod.
      </p>
<p>
        Defining a macro called CXXD_USE_BOOST specifies that the Boost library will
        be used for any mod. If used CXXD_USE_BOOST must always be defined to nothing,
        as in:
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_USE_BOOST</span>
</pre>
<p>
        Defining a macro called CXXD_USE_STD specifies that the C++ standard library
        will be used for any mod. If used CXXD_USE_STD must always be defined to
        nothing, as in:
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_USE_STD</span>
</pre>
<p>
        If both CXXD_USE_BOOST and CXXD_USE_STD is defined a preprocessing error
        will occur when any mod header is included.
      </p>
<p>
        If for any given mod 'xxx' both CXXD_'XXX'_USE_BOOST and CXXD_USE_STD is
        defined a preprocessing error will occur when the mod header file for 'xxx'
        is included.
      </p>
<p>
        If for any given mod 'xxx' both CXXD_'XXX'_USE_STD and CXXD_USE_BOOST is
        defined a preprocessing error will occur when the mod header file for 'xxx'
        is included.
      </p>
<p>
        As examples, using the regex mod:
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_USE_BOOST</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">cxx_dual</span><span class="special">/</span><span class="identifier">regex</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="special">...</span> <span class="identifier">code</span>
</pre>
<p>
        CXXD_HAS_STD_REGEX is defined as '0', CXXD_REGEX_NS is defined as 'boost',
        and CXXD_REGEX_HEADER is defined as '&lt;boost/regex.hpp&gt;'.
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_USE_STD</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">cxx_dual</span><span class="special">/</span><span class="identifier">regex</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="special">...</span> <span class="identifier">code</span>
</pre>
<p>
        CXXD_HAS_STD_REGEX is defined as '1', CXXD_REGEX_NS is defined as 'std',
        and CXXD_REGEX_HEADER is defined as '&lt;regex&gt;'. as long as the C++ standard
        regex library is available for use, else a preprocessing error is generated.
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_REGEX_USE_BOOST</span>
<span class="preprocessor">#define</span> <span class="identifier">CXXD_USE_STD</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">cxx_dual</span><span class="special">/</span><span class="identifier">regex</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="special">...</span> <span class="identifier">code</span>
</pre>
<p>
        A preprocessing error is generated.
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_REGEX_USE_STD</span>
<span class="preprocessor">#define</span> <span class="identifier">CXXD_USE_BOOST</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">cxx_dual</span><span class="special">/</span><span class="identifier">regex</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="special">...</span> <span class="identifier">code</span>
</pre>
<p>
        A preprocessing error is generated.
      </p>
<p>
        Using any CXXD mod header:
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_USE_BOOST</span>
<span class="preprocessor">#define</span> <span class="identifier">CXXD_USE_STD</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">cxx_dual</span><span class="special">/</span><span class="char">'any_cxxd_mod_header'</span>
<span class="special">...</span> <span class="identifier">code</span>
</pre>
<p>
        A preprocessing error is generated.
      </p>
<h5>
<a name="cxxd.sadvanced.overriding_the_default_choosing_.h3"></a>
        <span class="phrase"><a name="cxxd.sadvanced.overriding_the_default_choosing_.purpose_of_overriding"></a></span><a class="link" href="overriding_the_default_choosing_.html#cxxd.sadvanced.overriding_the_default_choosing_.purpose_of_overriding">Purpose
        of overriding</a>
      </h5>
<p>
        The purpose of using overriding macros, for any mod with the specific overriding
        macros or for CXXD as a whole with the general overriding macros, is to override
        the default algorithm which CXXD uses to choose a dual library. However using
        overriding macros for one's own direct use(s) of CXXD is generally foolish.
        This is because the easiest implementation, rather than using an overriding
        macro, is to just to not use CXXD for a mod in favor of using either the
        Boost library or C++ standard library directly.
      </p>
<p>
        In other words, instead of:
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_USE_BOOST</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">cxx_dual</span><span class="special">/</span><span class="identifier">regex</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="identifier">cxxd_regex_ns</span><span class="special">::</span><span class="identifier">regex</span> <span class="identifier">my_regex</span><span class="special">;</span> <span class="comment">// etc.</span>
<span class="special">...</span> <span class="identifier">code</span>
</pre>
<p>
        you can simply code:
      </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">regex</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">regex</span> <span class="identifier">my_regex</span><span class="special">;</span> <span class="comment">// etc.</span>
<span class="special">...</span> <span class="identifier">code</span>
</pre>
<p>
        and instead of:
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_USE_STD</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">cxx_dual</span><span class="special">/</span><span class="identifier">regex</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="identifier">cxxd_regex_ns</span><span class="special">::</span><span class="identifier">regex</span> <span class="identifier">my_regex</span><span class="special">;</span> <span class="comment">// etc.</span>
<span class="special">...</span> <span class="identifier">code</span>
</pre>
<p>
        you can simply code:
      </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">regex</span><span class="special">&gt;</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">regex</span> <span class="identifier">my_regex</span><span class="special">;</span> <span class="comment">// etc.</span>
<span class="special">...</span> <span class="identifier">code</span>
</pre>
<p>
        In this sense the examples given above of using specific or general overriding
        macros are purely artificial in order to merely show what the meaning of
        these overriding macros entail. In actual code directly overriding a particular
        mod should almost never be done in favor of directly using either the Boost
        or C++ standard implementations of a dual library.
      </p>
<p>
        So what is the actual purpose of the overriding macros ? The purpose is to
        override the use of CXXD by another library whose source files can not or
        should not be modified. A third-party library may choose to use CXXD to provide
        a dual library for a particular mod. Your own code, which uses the third-party
        library but otherwise uses either the Boost version of the dual library or
        the C++ standard version of the dual library in all other situations, may
        enforce its own usage on the dual library interface of the third-party library
        by using an overriding macro. As an example a third-party library might have
        as a public interface:
      </p>
<pre class="programlisting"><span class="comment">// Header file ThirdPartyHeader.hpp</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">cxx_dual</span><span class="special">/</span><span class="identifier">regex</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="keyword">class</span> <span class="identifier">ThirdPartyClass</span>
    <span class="special">{</span>
    <span class="keyword">public</span><span class="special">:</span>
    <span class="keyword">void</span> <span class="identifier">SomeFunction</span><span class="special">(</span><span class="identifier">cxxd_regex_ns</span><span class="special">::</span><span class="identifier">regex</span> <span class="special">&amp;);</span>
    <span class="special">...</span> <span class="comment">// other functionality</span>
    <span class="special">};</span>
</pre>
<p>
        We will assume, in this instance, this is a header-only library ( an extended
        discussion of using CXXD with a non-header-only library will follow later
        in the documentation ). In one's own code you may desire to use the ThirdPartyClass::SomeFunction
        interface with specifically the Boost regex library only. Your own code might
        then look like:
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_REGEX_USE_BOOST</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">ThirdPartyHeader</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="identifier">boost</span><span class="special">::</span><span class="identifier">regex</span> <span class="identifier">my_regex</span><span class="special">(</span><span class="string">"SomeRegularExpression etc."</span><span class="special">);</span>
<span class="identifier">ThirdPartyClass</span> <span class="identifier">tpclass</span><span class="special">;</span>
<span class="identifier">tpclass</span><span class="special">.</span><span class="identifier">SomeFunction</span><span class="special">(</span><span class="identifier">my_regex</span><span class="special">);</span>
</pre>
<p>
        Conversely you may decide that your use of the ThirdPartyClass::SomeFunction
        interface should be with the C++ standard regex library only, so your code
        might then look like:
      </p>
<pre class="programlisting"><span class="preprocessor">#define</span> <span class="identifier">CXXD_REGEX_USE_STD</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">ThirdPartyHeader</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="identifier">std</span><span class="special">::</span><span class="identifier">regex</span> <span class="identifier">my_regex</span><span class="special">(</span><span class="string">"SomeRegularExpression etc."</span><span class="special">);</span>
<span class="identifier">ThirdPartyClass</span> <span class="identifier">tpclass</span><span class="special">;</span>
<span class="identifier">tpclass</span><span class="special">.</span><span class="identifier">SomeFunction</span><span class="special">(</span><span class="identifier">my_regex</span><span class="special">);</span>
</pre>
<p>
        Instead if you did accept the dual nature of the ThirdPartyHeader.hpp header,
        your code might then like:
      </p>
<pre class="programlisting"><span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">ThirdPartyHeader</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="identifier">cxxd_regex_ns</span><span class="special">::</span><span class="identifier">regex</span> <span class="identifier">my_regex</span><span class="special">(</span><span class="string">"SomeRegularExpression etc."</span><span class="special">);</span>
<span class="identifier">ThirdPartyClass</span> <span class="identifier">tpclass</span><span class="special">;</span>
<span class="identifier">tpclass</span><span class="special">.</span><span class="identifier">SomeFunction</span><span class="special">(</span><span class="identifier">my_regex</span><span class="special">);</span>
</pre>
<p>
        In other words using the overriding macros of CXXD serves the purpose of
        using some already established interface involving CXXD without changing
        that interface's own code, at the same time forcing the choice of a particular
        dual library to be used. We can say that overriding macros change the dual
        library nature of a mod to a single library interface.
      </p>
<h5>
<a name="cxxd.sadvanced.overriding_the_default_choosing_.h4"></a>
        <span class="phrase"><a name="cxxd.sadvanced.overriding_the_default_choosing_.overriding_one_s_own_interface"></a></span><a class="link" href="overriding_the_default_choosing_.html#cxxd.sadvanced.overriding_the_default_choosing_.overriding_one_s_own_interface">Overriding
        one's own interface</a>
      </h5>
<p>
        There is a situation where the programmer may choose to override his own
        use of a particular mod. This is when he programs his own interface using
        a particular mod but decides for a particular combination of compiler and/or
        OS that he wants to override that choice. In other words the programmer wishes
        to use a dual library for the benefits that CXXD has to offer but knows that
        for some combination of compiler and/or operating system that the particular
        dual library choice must be overridden for a reason, perhaps to prevent a
        faulty library implementation from being used.
      </p>
<p>
        Let's imagine that for a particular compiler version 'CCC' version 'NNN'
        on a particular OS 'OOO' we know that the standard library version of mod
        'XXX' is buggy. Also let's imagine that we can test for the buggy combination
        through using the preprocessor defines, as we can do in Boost through either
        Boost.Config or even more easily through Boost.Predef. Our pseudocode for
        overriding our own use of the dual library in a header file might look like:
      </p>
<pre class="programlisting"><span class="comment">// Header file OwnOverrideHeader.hpp</span>
<span class="preprocessor">#if</span> <span class="identifier">CCCNNN</span> <span class="special">&amp;&amp;</span> <span class="identifier">OOO</span>
<span class="preprocessor">#define</span> <span class="identifier">CXXD_XXX_USE_BOOST</span>
<span class="preprocessor">#endif</span>
<span class="preprocessor">#include</span> <span class="special">&lt;</span><span class="identifier">boost</span><span class="special">/</span><span class="identifier">cxx_dual</span><span class="special">/</span><span class="identifier">XXX</span><span class="special">.</span><span class="identifier">hpp</span><span class="special">&gt;</span>
<span class="keyword">class</span> <span class="identifier">OwnOverrideClass</span>
    <span class="special">{</span>
    <span class="keyword">public</span><span class="special">:</span>
    <span class="keyword">void</span> <span class="identifier">SomeOwnOverrideFunction</span><span class="special">(</span><span class="identifier">cxxd_xxx_ns</span><span class="special">::</span><span class="identifier">xxx_object</span> <span class="special">&amp;);</span>
    <span class="special">...</span> <span class="comment">// other functionality</span>
    <span class="special">};</span>
</pre>
<p>
        So essentially where the purpose of the override macros is to change another
        interface's dual library choice for a particular mod to a single library,
        you can use the override macros with one's own interface in order to provide
        one-off situations where you want to specifically control the library chosen
        for a mod for a particular compiling environment.
      </p>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright &#169; 2015, 2016 Tropic Software East Inc<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../sadvanced.html"><img src="../../../../../../doc/src/images/prev.png" alt="Prev"></a><a accesskey="u" href="../sadvanced.html"><img src="../../../../../../doc/src/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../../../doc/src/images/home.png" alt="Home"></a><a accesskey="n" href="consistency.html"><img src="../../../../../../doc/src/images/next.png" alt="Next"></a>
</div>
</body>
</html>
